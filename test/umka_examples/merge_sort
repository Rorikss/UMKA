fun merge_sort(arr) -> [] {
    if (len(arr) <= 1) {
        return arr;
    }
    let mid = len(arr) / 2;
    let left = [];
    let right = [];
    for (let i = 0; i < mid; i = i + 1) {
        add(left, get(arr, i));
    }
    for (let i = mid; i < len(arr); i = i + 1) {
        add(right, get(arr, i));
    }
    return merge(merge_sort(left), merge_sort(right));
}


fun merge(left, right) -> [] {
    let result = [];
    let i = 0;
    let j = 0;
    while (i < len(left) && j < len(right)) {
        if (get(left, i) < get(right, j)) {
            add(result, get(left, i));
            i = i + 1;
        } else {
            add(result, get(right, j));
            j = j + 1;
        }
    }
    while (i < len(left)) {
        add(result, get(left, i));
        i = i + 1;
    }
    while (j < len(right)) {
        add(result, get(right, j));
        j = j + 1;
    }
    return result;
}


fun main() -> unit {
    let arr = [5, 2, 4, 6, 1, 3, 4, -1, -200, 345];
    print(merge_sort(arr));
}